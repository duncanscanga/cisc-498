{% extends 'base.html' %}
<link rel="stylesheet" href="../static/styles/index.css" />

{% block header %}
<h1>{% block title %}Assignment Details - {{ assignment.name }}{% endblock %}</h1>
{% endblock %}

{% block content %}

<div id="assignment-details" class="container">
    <h2>Assignment Details:</h2>

    <div class="detail-item">
        <strong>Name:</strong> {{ assignment.name }}
    </div>
    <div class="detail-item">
        <strong>Start Date:</strong> {{ assignment.startDate}}
    </div>
    <div class="detail-item">
        <strong>End Date:</strong> {{ assignment.endDate}}
    </div>
    <div id="test-cases">
        <h2>Test Cases:</h2>
        <ul>
            {% for test_case in testCases %}
            <li>{{ test_case.fileName }} - Visible: {{ 'Yes' if test_case.visible else 'No' }}</li>
            {% endfor %}
        </ul>
    </div>
    <!-- Conditional Button based on isOwner -->
    {% if isOwner %}
    <a href="/edit-assignment/{{ assignment.id }}" class="btn">Edit Assignment Details</a>
    <form action="/upload-testcase/{{ assignment.id }}" method="post" enctype="multipart/form-data">
        <input type="file" name="testcase_file" required>
        <div>
            <label>
                <input type="checkbox" name="visible" value="true"> Make test case visible to students
            </label>
        </div>
        <button type="submit" class="btn">Upload Test Case File</button>
    </form>
    {% else %}

    <div id="submissions">
        <h2>Submissions:</h2>
        <ul>
            {% for submission in submissions %}
            <li>
                {{ submission.fileName }} - Submitted on: {{ submission.submissionDate }}
                <a href="{{ url_for('download_submission', assignment_id=assignment.id, submission_id=submission.id) }}">Download</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    
    <form action="/submit-assignment/{{ assignment.id }}" method="post" enctype="multipart/form-data">
        <input type="file" name="assignment_file" required>
        <button type="submit" class="btn">Submit Assignment</button>
    </form>
    {% endif %}
</div>

{% endblock %}