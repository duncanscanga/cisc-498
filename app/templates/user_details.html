{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}User Details{% endblock %}</h1>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="../static/styles/index.css" />

<div class="container">

  {% if user is defined and student.role == 2 %}
  <div class="container">
    <h1>TA Assignment for: {{ course.name }} ({{ course.courseCode }})</h1>
    <h2>TA Assignment for: {{ student.username }} ({{ student.email }})</h2>


    {% if user.role == 3 %}
    <h2>Assigned Students:</h2>
    {% if assignedStudents %}
    <ul>
      {% for assignedStudent in assignedStudents %}
      <li>
        {{ assignedStudent.username }} ({{ assignedStudent.student_number }})
        <!-- Ensure you have a route and method to handle removal -->
        <form action="{{ url_for('remove_student_from_ta', course_id=course.id, ta_id=student.id, student_id=assignedStudent.id) }}" method="POST" style="display:inline;">
          <button type="submit" class="btn">Remove</button>
        </form>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p>No students have been assigned to this TA.</p>
    {% endif %}

    <h2>Assign Students to TA:</h2>
    <form action="{{ url_for('assign_students_to_ta', course_id=course.id, ta_id=student.id) }}" method="POST">
      {% for unassignedStudent in students %}
      <div>
        <input type="checkbox" name="student_ids" value="{{ unassignedStudent.id }}">
        {{ unassignedStudent.username }} ({{ unassignedStudent.student_number }})
      </div>
      {% endfor %}
      <button type="submit" class="btn">Assign Selected Students</button>
    </form>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
