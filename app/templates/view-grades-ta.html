{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}AutoGrader Result{% endblock %}</h1>
{% endblock %}

{% block content %}
<script src="https://l1nna.com/black-assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="../static/styles/base.css" />

<div class="container">
  <h1>AutoGrader Result: {{ student.username }} ({{ student.student_number }})</h1>
  <div id="submissions">
    <h2>Test Case Results:</h2>
    <h3>{{score}} / {{totalScore}}</h3>
    <ul>
      

      <form action="{{ url_for('update_grades', assignment_id=assignment.id, submission_id=submission.id) }}" method="post">
        <li> Submission Date: {{ submission.submissionDate }} %  </li>
      <div class="form-group">
        <label for="manual_late_marks">Late Marks:</label>
        <input type="number" class="form-control" id="manual_late_marks" name="manual_late_marks" value="{{ submission.manualLateMarks }}">
      </div>
        {% for result in submissionResults %}
        <li>
          Test Case: {{ result.testCaseId }}
          <br>
          Score: {{ result.score }} / {{ result.maxScore }}
          <br>
          Notes: {{ result.notes | replace("\n", "<br>") | safe }}
          <br>
          <div class="form-group">
            <label for="adjust_score_{{result.id}}">Adjust Score:</label>
            <input type="number" class="form-control" id="adjust_score_{{result.id}}" name="adjust_score_{{result.id}}" value="{{ result.score }}">
          </div>
          <div class="form-group">
            <label for="comments_{{result.id}}">Comments:</label>
            <textarea class="form-control" id="comments_{{result.id}}" name="comments_{{result.id}}">{{ result.taComment }}</textarea>
          </div>
          <!-- <div class="form-check">
            <input type="checkbox" class="form-check-input" id="approve_{{result.id}}" name="approve_{{result.id}}" {% if result.approved %}checked{% endif %}>
            <label class="form-check" for="approve_{{result.id}}">Approve</label>
          </div> -->
        </li>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Update All Grades</button>
      </form>
    </ul>
  </div>
</div>
{% endblock %}
